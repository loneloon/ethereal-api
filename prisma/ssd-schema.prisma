// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "./generated/ssd-client"
}

datasource db {
  provider = "sqlite"
  url      = env("SSD_DATABASE_URL")
}

model Session {
    id                String            @id @default(uuid())
    expiresAt         DateTime          
    device            Device            @relation(fields: [deviceId], references: [id])
    deviceId          String            @unique
    userId            String
    createdAt         DateTime          @default(now())
    updatedAt         DateTime          @updatedAt
}

model Secret {
    userId            String            @unique
    passHash          String
    salt              String
    createdAt         DateTime          @default(now())
    updatedAt         DateTime          @updatedAt
}

model Device {
    id                String            @id @default(uuid())
    session           Session?          
    sessionId         String?
    userAgent         String            
    ip                String

    @@unique(fields: [userAgent, ip])
}
